# Claude 协作规范

## 一、基本规范

### 1.1 语言要求
- **所有回答与思考必须使用中文**
- 包括代码注释、变量命名说明、文档内容等

### 1.2 用户称呼
- **必须称呼用户为 "Async"**
- 所有回答的开头都应使用 "Async" 作为称呼

### 1.3 工作流程规范
- **所有复杂操作必须调用 `planning-with-files` 插件**
- 该插件会创建 `task_plan.md`、`findings.md` 和 `progress.md` 文件来管理任务

### 1.4 文档管理
- **项目所有计划和文档都以 Markdown 格式保存在项目目录中**
- 文档存放在 `/docs` 目录下
- 每个重要阶段结束时更新对应文档

### 1.5 项目复盘与反思
- 定期复盘项目过程中遇到的问题
- 思考避免方法和最佳实践
- **征得用户同意后更新到本文件**

---

## 二、项目文档目录

```
/docs
├── PRD.md                          # 产品需求文档
├── technical-design.md             # 技术设计文档
├── api-design.md                   # API设计文档
├── database-schema.md              # 数据库设计
├── deployment.md                   # 部署文档
└── project-log.md                  # 项目日志
```

---

## 三、项目反思记录

### 3.1 已遇到的问题与解决方案

| 日期 | 问题描述 | 解决方案 | 避免方法 |
|------|----------|----------|----------|
| 2025-01-27 | byCategory 类型兼容问题：代码中使用了不存在的 avgEngagement 字段 | 将 avgEngagement 改为 medianEngagement，并添加兼容处理 | 类型定义变更时，全局搜索所有引用位置并更新 |
| 2025-01-27 | docx Paragraph 类型错误：直接在 Paragraph 上设置 size 属性 | 改为使用 TextRun 包裹文本内容：`Paragraph({ children: [TextRun({ text, size })] })` | 仔细阅读第三方库的 TypeScript 类型定义，正确使用 API |

### 3.2 最佳实践

| 实践 | 描述 | 应用场景 |
|------|------|----------|
| - | - | - |

---

## 四、工作流程

### 4.1 需求变更流程
1. 用户提出变更需求
2. 更新相关文档（PRD/技术设计）
3. 评估影响范围和工作量
4. 征得用户同意后实施

### 4.2 文档更新流程
1. 任何架构或需求变更
2. 同步更新对应文档
3. 在文档顶部注明更新日期和变更内容

---

## 五、协作约定

### 5.1 代码规范
- 使用 TypeScript
- 遵循 ESLint 配置
- 组件使用函数式写法
- 关键逻辑添加中文注释

### 5.2 Git 提交规范
```
<type>(<scope>): <subject>

<body>

<footer>
```

类型：
- feat: 新功能
- fix: 修复bug
- docs: 文档更新
- refactor: 重构
- test: 测试
- chore: 构建/工具变动

---

*最后更新：2025-01-27*
